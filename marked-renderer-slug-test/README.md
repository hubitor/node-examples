# Testing heading slugs in marked

The following example shows how you can create a custom header renderer using the npm [**marked**](https://github.com/chjj/marked) Markdown module to create your own header IDs.

## Input:

```markdown
# Locale slug test in for marked npm module

## Introduction
(en-US)

## ভূমিকা
(bn-BD)

## Введение
(ru)

---
```

## index.js

The following snippet shows the default behavior of the **marked** module.

```js
'use strict';

var readFile = require('fs').readFileSync;

var marked = require('marked');

var markdownString = readFile('./test.md', 'utf-8');
var output = marked(markdownString);

console.log(output);
```

### Output:

```html
<h1 id="locale-slug-test-in-for-marked-npm-module">Locale slug test in for marked npm module</h1>
<h2 id="introduction">Introduction</h2>
<p>(en-US)</p>

<h2 id="-">ভূমিকা</h2>
<p>(bn-BD)</p>

<h2 id="-">Введение</h2>
<p>(ru)</p>
<hr>
```

Note that both the `bn-BD` and `ru` translations have a heading `id` of "-", while the English text is a nice dash-delimited, lowercase string.

---

## index2.js

The following example shows how you can create a custom **marked** `Renderer` instance overrides the `heading` method to create custom `id` "slugs" using the [**slug**](https://github.com/dodo/node-slug) module.

```
'use strict';

var readFile = require('fs').readFileSync;
var format = require('util').format;

var marked = require('marked');
var slug = require('slug');

var renderer = new marked.Renderer();
renderer.heading = function (text, level) {
  return format('<h%d id="%s">%s</h%d>\n', level, slug(text.toLowerCase()), text, level);
};
var markdownString = readFile('./test.md', 'utf-8');
var output = marked(markdownString, {renderer: renderer});

console.log(output);
```

### Output:

```html
<h1 id="locale-slug-test-in-for-marked-npm-module">Locale slug test in for marked npm module</h1>
<h2 id="introduction">Introduction</h2>
<p>(en-US)</p>

<h2 id="">ভূমিকা</h2>
<p>(bn-BD)</p>

<h2 id="vvedenie">Введение</h2>
<p>(ru)</p>
<hr>
```

Now, the `ru` translation has an `id` attributed generated by the **slug**  module, but the slug module wasn't able to create an `id` for the `bn-BD` locale. We could probably solve this by checking whether the `slug()` method returns a value and either omit the `id` attribute in the Renderer/HTML, or else fall back to the raw text.

---

## index3.js

The following example shows how you can convert the custom `marked.Renderer()` into a separate module, _lib/renderer3.js_:

```js
'use strict';

var readFile = require('fs').readFileSync;

var SlugRenderer = require('./lib/renderer3');

var marked = require('marked');
var markdownString = readFile('./test.md', 'utf-8');
var output = marked(markdownString, {renderer: SlugRenderer});

console.log(output);
```

### lib/renderer3.js

```js
'use strict';


var format = require('util').format;

var marked = require('marked');
var slug = require('slug');

var renderer = new marked.Renderer();
renderer.heading = function (text, level) {
  return format('<h%d id="%s">%s</h%d>\n', level, slug(text.toLowerCase()), text, level);
};

module.exports = renderer;
```

### Output:

```html
<h1 id="locale-slug-test-in-for-marked-npm-module">Locale slug test in for marked npm module</h1>
<h2 id="introduction">Introduction</h2>
<p>(en-US)</p>

<h2 id="">ভূমিকা</h2>
<p>(bn-BD)</p>

<h2 id="vvedenie">Введение</h2>
<p>(ru)</p>
<hr>
```
